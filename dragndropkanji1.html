<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Kanji Challenge Mr.DJ</title>
    <style>
        :root {
            --primary: #2c3e50;
            --accent: #3498db;
            --success: #27ae60;
        }
        body { font-family: sans-serif; background: #f4f7f6; display: flex; flex-direction: column; align-items: center; }
        
        #stats { margin: 20px; font-size: 24px; font-weight: bold; color: var(--primary); }
        
        /* Grid 4x5 */
        .game-grid {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            grid-template-rows: repeat(6, 1fr);
            gap: 10px;
            width: 90vw;
            max-width: 800px;
            padding: 10px;
        }

        .item {
            height: 80px;
            display: flex;
            justify-content: center;
            align-items: center;
            border-radius: 8px;
            font-weight: bold;
            user-select: none;
            transition: transform 0.2s;
        }

        /* Gaya Kartu Kanji (Draggable) */
        .kanji-card {
            background: white;
            border: 2px solid var(--accent);
            font-size: 32px;
            cursor: grab;
            box-shadow: 0 4px 6px rgba(0,0,0,0.1);
        }

        /* Gaya Kotak Target (Drop Area) */
        .drop-target {
            background: #dfe6e9;
            border: 2px dashed #b2bec3;
            font-size: 14px;
            text-align: center;
            color: #080808;
        }

        .hovered { background: #fab1a0; border-color: #e17055; }
        .correct { background: var(--success); color: white; border-style: solid; }
    </style>
</head>
<body>

    <div id="stats">Waktu: <span id="timer">60</span>s</div>
    <div class="game-grid" id="gameGrid"></div>
    <p>Cara Baca Kanji Mr.DJ</p>
    <div id="stats">
        Waktu: <span id="timer">60</span>s | 
        Skor: <span id="score">0</span>
    </div>

    <script>
        // Data Game (10 Pasang = 20 Kartu)
        const gameData = [
            { kanji: '習慣', arti: 'しゅうかん' }, { kanji: '希望', arti: 'きぼう' },
            { kanji: '予約', arti: 'よやく' }, { kanji: '心配', arti: 'しんぱい' },
            { kanji: '生活', arti: 'せいかつ' }, { kanji: '相談', arti: 'そうだん' },
            { kanji: '用事', arti: 'ようじ' }, { kanji: '危険', arti: 'きけん' },
            { kanji: '都合', arti: 'つごう' }, { kanji: '無料', arti: 'むりょう' },
            { kanji: '映画', arti: 'えいが' }, { kanji: '質問', arti: 'しつもん' }
        ];

        let timeLeft = 60;
        let timerId;
        let score = 0;
        const grid = document.getElementById('gameGrid');
        const timerDisplay = document.getElementById('timer');
        const scoreDisplay = document.getElementById('score');

        // 1. Inisialisasi Game
        function initGame() {
            const elements = [];

            gameData.forEach((data, index) => {
                // Buat Elemen Kanji
                const kanjiEl = document.createElement('div');
                kanjiEl.classList.add('item', 'kanji-card');
                kanjiEl.draggable = true;
                kanjiEl.id = `kanji-${index}`;
                kanjiEl.dataset.match = index;
                kanjiEl.innerText = data.kanji;
                kanjiEl.addEventListener('dragstart', dragStart);
                elements.push(kanjiEl);

                // Buat Elemen Target
                const targetEl = document.createElement('div');
                targetEl.classList.add('item', 'drop-target');
                targetEl.dataset.accept = index;
                targetEl.innerText = data.arti;
                targetEl.addEventListener('dragover', e => e.preventDefault());
                targetEl.addEventListener('dragenter', dragEnter);
                targetEl.addEventListener('dragleave', dragLeave);
                targetEl.addEventListener('drop', drop);
                elements.push(targetEl);
            });

            // Acak posisi elemen
            elements.sort(() => Math.random() - 0.5);
            elements.forEach(el => grid.appendChild(el));

            startTimer();
        }

        // 2. Logika Timer
        function startTimer() {
            timerId = setInterval(() => {
                timeLeft--;
                timerDisplay.innerText = timeLeft;
                if (timeLeft <= 0) {
                    clearInterval(timerId);
                    alert("Waktu Habis! Coba lagi?");
                    location.reload();
                }
            }, 1000);
        }

        // 3. Handler Drag and Drop
        function dragStart(e) {
            e.dataTransfer.setData('text/plain', e.target.id);
        }

        function dragEnter(e) { e.target.classList.add('hovered'); }
        function dragLeave(e) { e.target.classList.remove('hovered'); }

        function drop(e) {
            e.target.classList.remove('hovered');
            const cardId = e.dataTransfer.getData('text/plain');
            const card = document.getElementById(cardId);
            
            if (card.dataset.match === e.target.dataset.accept) {
                e.target.classList.add('correct');
                e.target.innerText = card.innerText;
                card.style.visibility = 'hidden';
                // Tambah Skor (+10 poin)
                score += 10;
                scoreDisplay.innerText = score;
                checkWin();
            }else {
                // Penalti jika salah (Opsional: -5 poin)
                if (score >= 5) {
                    score -= 5;
                    scoreDisplay.innerText = score;
                }
            }
        }

        function checkWin() {
            const corrects = document.querySelectorAll('.correct');
            if (corrects.length === gameData.length) {
                clearInterval(timerId);
                // Bonus skor berdasarkan sisa waktu
                const timeBonus = timeLeft * 2;
                score += timeBonus;
                scoreDisplay.innerText = score;
                //setTimeout(() => alert("Selamat! Kamu Menang!"), 200);
                setTimeout(() => {
                alert(`Selamat! Kamu Menang!\nSkor Akhir: ${score}\nBonus Waktu: ${timeBonus}`);
                location.reload();
                }, 500);
            }
        }

        initGame();
    </script>
</body>

</html>

